<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>silly gift :3</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="container">
        <!-- Login Page -->
        <div id="loginPage" class="card">
            <h1>Enjoy ! </h1>
            <div class="login-form">
                <input type="password" id="passwordInput" placeholder="Enter our secret password..." />
                <button onclick="login()">Our Secret Password</button>
            </div>
            <p style="color: #666; font-style: italic;">I really hope you like it ! and more "games" to come! âœ¨</p>
        </div>

        <!-- Main Menu -->
        <div id="mainMenu" class="card hidden">
            <h1>HAVE FUNNNNN</h1>
            <div class="nav-buttons">
                <button onclick="showArticles()">ğŸ“ Our Article Collection</button>
                <button onclick="showConfessionGame()">ğŸ² Confession Roulette</button>
                <button onclick="showGrievanceGame()">ğŸ’Œ Submit a Grievance</button>
            </div>
        </div>

        <!-- Articles Section -->
        <div id="articlesSection" class="card wide-card hidden">
            <button class="back-button" onclick="showMainMenu()">â† Back to Main Menu</button>
            <h2>Select a concept or concepts you want us to philosophize about (pssst you can always be silly with the most random combinations) </h2>
            
            <div class="concept-suggestions" id="conceptSuggestions">
                <!-- Will be populated by JavaScript -->
            </div>

            <button onclick="showNewArticle()">âœï¸ Write New Article</button>
            <button onclick="generateRandomConcept()">ğŸ² Random Concept</button>

            <div id="articlesList" class="articles-grid">
                <!-- Articles will be displayed here -->
            </div>

            <!-- New Article Form -->
            <div id="newArticleForm" class="article-form hidden">
                <h3>Create New Article</h3>
                <input type="text" id="articleTitle" placeholder="Article Title" />
                <input type="text" id="articleConcept" placeholder="Concept/Topic" />
                <textarea id="articleContent" placeholder="Start writing your thoughts here..."></textarea>
                <button onclick="saveArticle()">ğŸ’¾ Save Article</button>
                <button onclick="hideNewArticle()" class="back-button">Cancel</button>
            </div>
        </div>

        <!-- Confession Game -->
        <div id="confessionSection" class="card hidden" style="max-width: 800px; height: 90vh; display: none; flex-direction: column; padding: 20px; position: relative;">
            <button class="back-button" onclick="showMainMenu()" style="align-self: flex-start;">â† Back to Main Menu</button>
            
            <!-- History Button in top right -->
            <button onclick="toggleConfessionHistory()" style="
                position: absolute;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #764ba2, #667eea);
                padding: 10px 20px;
                font-size: 14px;
                border-radius: 10px;
                color: white;
                border: none;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 20px rgba(0,0,0,0.2)';" 
               onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                ğŸ“œ History
            </button>
            
            <!-- Confession History Modal -->
            <div id="confessionHistoryModal" class="modal-overlay hidden">
                <div class="modal-content" style="max-width: 600px; max-height: 80vh; overflow-y: auto;">
                    <h3 style="color: #667eea; margin-bottom: 20px;">ğŸ“œ Confession History</h3>
                    <div id="confessionHistoryList">
                        <!-- Will be populated by JavaScript -->
                    </div>
                    <div class="modal-buttons">
                        <button onclick="toggleConfessionHistory()">Close</button>
                    </div>
                </div>
            </div>
            
            <h2 style="text-align: center;">Confession Roulette ğŸ­</h2>
            
            <div style="flex: 1; display: flex; gap: 30px; margin: 20px 0; min-height: 0;">
                <!-- Vertical Slider Section -->
                <div style="display: flex; flex-direction: column; align-items: center; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 15px; width: 150px;">
                    <label style="font-weight: bold; margin-bottom: 20px; text-align: center; font-size: 16px;">Send<br/>Probability</label>
                    
                    <div style="position: relative; height: 300px; width: 80px; display: flex; align-items: center; justify-content: center;">
                        <!-- Custom slider track -->
                        <div style="position: absolute; width: 12px; height: 100%; background: linear-gradient(to top, #4ecdc4, #667eea, #ff6b6b); border-radius: 6px; box-shadow: inset 0 0 5px rgba(0,0,0,0.2);"></div>
                        
                        <!-- The actual range input -->
                        <input type="range" id="probabilitySlider" 
                               min="10" max="50" step="10" value="30"
                               oninput="updateProbability()" 
                               style="
                                   position: absolute;
                                   width: 300px;
                                   height: 40px;
                                   -webkit-appearance: none;
                                   background: transparent;
                                   outline: none;
                                   transform: rotate(-90deg);
                                   transform-origin: center;
                                   cursor: pointer;
                                   margin: 0;
                                   padding: 0;
                               " />
                    </div>
                    
                    <div id="probabilityValue" style="font-size: 36px; font-weight: bold; color: #667eea; margin-top: 20px; text-shadow: 0 2px 4px rgba(0,0,0,0.1);">30%</div>
                    
                    <p style="font-size: 12px; color: #666; text-align: center; margin-top: 15px;">Lower = Safer but lower points <br/> Higher = Riskier but higher points <br/> 10% is 1 point and 50% is 5 points etc</p>
                </div>
                
                <!-- Main Content Area -->
                <div style="flex: 1; display: flex; flex-direction: column;">
                    <!-- Result Message Area -->
                    <div style="flex: 1; display: flex; align-items: center; justify-content: center;">
                        <div id="resultMessage" class="result-message hidden" style="margin: 20px; max-width: 500px;"></div>
                    </div>
                    
                    <!-- Suggestions Area -->
                    <div style="background: rgba(102, 126, 234, 0.05); border-radius: 15px; padding: 15px; margin-bottom: 20px;">
                        <p style="font-size: 14px; color: #666; margin-bottom: 10px; text-align: center;">type a confession and shoot, depending on fate it's either saved or lost. <br/> If your secret is discarded you get a point. You can exchange points for favours from me (im trying to fuel your gambling addiction). <br/> Some examples are:</p>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
                            <button onclick="setConfessionStarter('One of the lines I hid from you is...')" 
                                    style="font-size: 14px; padding: 8px 16px; background: white; color: #667eea; border: 1px solid #667eea;">
                                One of the lines I hid from you is...
                            </button>
                            <button onclick="setConfessionStarter('I\'ve never told you that...')" 
                                    style="font-size: 14px; padding: 8px 16px; background: white; color: #667eea; border: 1px solid #667eea;">
                                I've never told you that...
                            </button>
                            <button onclick="setConfessionStarter('My most embarrassing moment was...')" 
                                    style="font-size: 14px; padding: 8px 16px; background: white; color: #667eea; border: 1px solid #667eea;">
                                My most embarrassing moment was...
                            </button>
                        </div>
                    </div>
                    
                    <!-- Message Bar -->
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="text" id="confessionInput" 
                               placeholder="Type your confession ..." 
                               style="flex: 1; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px;"
                               onkeypress="handleConfessionEnter(event)"
                               oninput="checkConfessionInput()" />
                        <button onclick="spinRoulette()" id="spinButton" 
                                style="background: linear-gradient(45deg, #ff6b6b, #ee5a6f); padding: 15px 30px; font-size: 18px; font-weight: bold;" 
                                disabled>
                            ğŸ”« Shoot!
                        </button>
                    </div>
                </div>
            </div>
        
        </div>
        <!-- This is the corrected grievance section that should replace the existing one in index.html -->
        <!-- Find this section around line 144 in your index.html and replace it with: -->

        <div id="grievanceSection" class="card hidden" style="max-width: 600px;">
            <button class="back-button" onclick="showMainMenu()">â† Back to Main Menu</button>

            <h2 style="text-align: center; margin-bottom: 30px;">Submit a Grievance ğŸŒ¹</h2>

        <form id="grievanceForm">
            <div style="display: flex; flex-direction: column; gap: 15px;">
                <label for="grievanceTitle" class="sr-only">Title</label>
                

                <label for="grievanceDetails" class="sr-only">What's bothering you?</label>
                <textarea id="grievanceDetails" name="details" placeholder="What's bothering you?" rows="6" required
                        style="width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px; resize: vertical;"></textarea>

                <div class="field-group" style="display: flex; flex-direction: column; gap: 5px;">
                    <label for="grievanceMood" style="font-weight: bold; color: #667eea;">Mood:</label>
                    <select id="grievanceMood" name="mood" 
                            style="width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px;">
                        <option value="angry">ğŸ˜¡ Angry</option>
                        <option value="sad">ğŸ˜¢ Sad</option>
                        <option value="neutral">ğŸ˜ Neutral</option>
                        <option value="happy">ğŸ˜Š Happy</option>
                    </select>
                </div>

                <div class="field-group" style="display: flex; flex-direction: column; gap: 5px;">
                    <label for="grievanceSeverity" style="font-weight: bold; color: #667eea;">Severity:</label>
                    <select id="grievanceSeverity" name="severity"
                            style="width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px;">
                        <option value="kitkat" selected>A chunky kitkat would fix this ğŸ‘¹</option>
                        <option value="minor">Minor inconvenience ğŸ™</option>
                        <option value="major">Major issue ğŸ˜±</option>
                        <option value="critical">Critical emergency ğŸš¨</option>
                    </select>
                </div>

                <button type="submit" 
                        style="background: linear-gradient(45deg, #ff5fa2, #e04f8b); 
                            color: white; 
                            border: none; 
                            padding: 15px 30px; 
                            border-radius: 10px; 
                            font-size: 18px; 
                            font-weight: bold;
                            cursor: pointer; 
                            margin-top: 20px;
                            transition: transform 0.3s, box-shadow 0.3s;">
                    Submit ğŸ’Œ
                </button>
            </div>
        </form>
        
        <!-- Optional: Show submitted grievances -->
        <div id="grievanceHistory" style="margin-top: 30px; display: none;">
            <h3 style="color: #667eea;">Recent Submissions</h3>
            <div id="grievanceList"></div>
        </div>
    </div>
                
        
        
        
        </div>
    </div>



    <!-- Load JavaScript files -->
    <script src="./js/data.js"></script>
    <script src="./js/storage.js"></script>  
    <script src="./js/utils.js"></script>
    <script src="./js/auth.js"></script>
    <script src="./js/navigation.js"></script>
    <script src="./js/articles.js"></script>
    <script src="./js/confessions.js"></script>
    <script src="./js/grievances.js"></script>
    <script src="./js/main.js"></script>
</body>
</html>